/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 12.0 		*/
/*  Created On : 12-jul-2017 05:35:29 p.m. 				*/
/*  DBMS       : DB2 						*/
/* ---------------------------------------------------- */

/* Create Tables */

CREATE TABLE DB2ADMIN.NOMPERSONAL
(
	HVCODIGO smallint NOT NULL,
	HVCEDULA double NOT NULL,
	HVTIPO smallint NOT NULL,
	HVAPE1 varchar(30) NOT NULL,
	HVAPE2 varchar(30),
	HVNOM1 varchar(30) NOT NULL,
	HVNOM2 varchar(30),
	HVDIR varchar(70),
	HVTELS varchar(60),
	HVCELS varchar(60),
	HVEMAIL varchar(60),
	HVSEXO smallint,
	HVECIVIL smallint,
	HVFECHANAC date,
	HVPAISNAC smallint,
	HVDPTONAC smallint,
	HVMUNNAC smallint,
	HVFOTO varchar(40),
	HVSEDE smallint,
	HVESTADO varchar(1)
)
;

CREATE TABLE DB2ADMIN.NOMDEPENDENCIAS
(
	DEPCODIGO smallint NOT NULL,
	DEPNOMBRE varchar(80) NOT NULL,
	DEPCODPPTO varchar(10) NOT NULL,
	DEPESTADO varchar(1) NOT NULL,
	CODPROG smallint NOT NULL,
	AREA smallint NOT NULL,
	DATOS smallint
)
;

CREATE TABLE PERSONAL.ORGANIGRAMA
(
	CODDEPENDENCIA smallint DEFAULT 0 NOT NULL,
	CODJEFE smallint,
	CODNIVEL smallint,
	SUPDEPENDENCIA smallint
)
;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE DB2ADMIN.NOMPERSONAL ADD CONSTRAINT SQL110719152524120
	PRIMARY KEY (HVCODIGO)
;

CREATE UNIQUE INDEX SQL110719152523930 ON DB2ADMIN.NOMPERSONAL (HVCODIGO ASC)
;

ALTER TABLE DB2ADMIN.NOMDEPENDENCIAS ADD CONSTRAINT SQL110629173217340
	PRIMARY KEY (DEPCODIGO)
;

CREATE UNIQUE INDEX SQL110629173217100 ON DB2ADMIN.NOMDEPENDENCIAS (DEPCODIGO ASC)
;

ALTER TABLE PERSONAL.ORGANIGRAMA ADD CONSTRAINT SQL131125143220050
	PRIMARY KEY (CODDEPENDENCIA)
;

CREATE UNIQUE INDEX SQL131125143219920 ON PERSONAL.ORGANIGRAMA (CODDEPENDENCIA ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE PERSONAL.ORGANIGRAMA ADD CONSTRAINT FK_ORGANIGRAMA_NOMDEPENDENCIAS
	FOREIGN KEY (CODDEPENDENCIA) REFERENCES DB2ADMIN.NOMDEPENDENCIAS (DEPCODIGO) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE PERSONAL.ORGANIGRAMA ADD CONSTRAINT FK_ORGANIGRAMA_NOMPERSONAL
	FOREIGN KEY (CODJEFE) REFERENCES DB2ADMIN.NOMPERSONAL (HVCODIGO) ON DELETE No Action ON UPDATE No Action
;

/* Create Table Comments */

COMMENT ON TABLE DB2ADMIN.NOMPERSONAL
	IS 'Registra los datos basicos de los empleados de la universidad'
;

COMMENT ON TABLE DB2ADMIN.NOMDEPENDENCIAS
	IS 'Registra las dependencias existentes en la institucion'
;

COMMENT ON COLUMN PERSONAL.ORGANIGRAMA.CODDEPENDENCIA
	IS 'Almacena el id de la dependencia segun estructura de recursos humanos'
;

COMMENT ON COLUMN PERSONAL.ORGANIGRAMA.CODJEFE
	IS 'Almacena el codigo del jefe encargado de la dependencia'
;

COMMENT ON COLUMN PERSONAL.ORGANIGRAMA.CODNIVEL
	IS 'Almacena el id del identificador de ubicacion en el organigrama'
;

COMMENT ON COLUMN PERSONAL.ORGANIGRAMA.SUPDEPENDENCIA
	IS 'Almacena el identificado de la dependencia superior o jefe'
;
